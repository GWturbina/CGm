/**
 * CardGift Dashboard - Translations
 * Multi-language support: EN, RU, UA
 */

const translations = {
    en: {
        // Sidebar
        dashboard: "Dashboard",
        myTeam: "My Team",
        archive: "Archive",
        surveys: "Surveys",
        contacts: "Contacts",
        push: "Push Notifications",
        wallet: "Wallet",
        settings: "Settings",
        logout: "Logout",
        
        // User Info
        userLevel: "Partner",
        userId: "Your ID",
        
        // Dashboard Stats
        totalReferrals: "Total Referrals",
        activeReferrals: "Active Referrals",
        totalCards: "Total Cards",
        totalViews: "Total Views",
        monthlyIncome: "Monthly Income",
        
        // Team Section
        teamTitle: "My Team",
        level: "Level",
        referrals: "Referrals",
        searchPlaceholder: "Search by ID or wallet...",
        filterAll: "All",
        filterActive: "Active",
        filterInactive: "Inactive",
        search: "Search",
        clear: "Clear",
        
        // Table Headers
        tableId: "ID",
        tableWallet: "Wallet",
        tableStatus: "Status",
        tableLevel: "Level",
        tableReferrals: "Referrals",
        tableCards: "Cards",
        tableDate: "Registration Date",
        tableActions: "Actions",
        
        // Status
        statusActive: "Active",
        statusInactive: "Inactive",
        statusCoauthor: "Co-Author",
        statusSuper: "Super Admin",
        statusMini: "Mini Admin",
        statusBasic: "Basic",
        
        // Archive
        archiveTitle: "Card Archive",
        cardViews: "views",
        cardShares: "shares",
        shareCard: "Share",
        openCard: "Open",
        deleteCard: "Delete",
        noCards: "No cards yet",
        createFirst: "Create your first card!",
        
        // Surveys
        surveysTitle: "Surveys",
        surveyVotes: "votes",
        surveyEnds: "Ends",
        vote: "Vote",
        viewResults: "Results",
        createSurvey: "Create Survey",
        
        // Contacts Section
        contactsTitle: "Contacts",
        allContacts: "All Contacts",
        telegram: "Telegram",
        whatsapp: "WhatsApp",
        email: "Email",
        instagram: "Instagram",
        facebook: "Facebook",
        tiktok: "TikTok",
        twitter: "Twitter",
        viber: "Viber",
        importContacts: "Import",
        exportContacts: "Export",
        
        // Contact Table
        contactName: "Name",
        contactPlatform: "Platform",
        contactHandle: "Contact",
        contactConsent: "Consent",
        contactNotes: "Notes",
        contactAdded: "Added",
        consentYes: "Yes",
        consentNo: "No",
        
        // Push Notifications
        pushTitle: "Push Notifications",
        pushLimits: "Daily limit: 100 notifications. Remaining today:",
        selectAudience: "Select Audience",
        allUsers: "All Users",
        activeOnly: "Active Only",
        newUsers: "New Users (7 days)",
        customGroup: "Custom Group",
        createGroup: "Create Group",
        groupName: "Group name",
        messageTitle: "Notification Title",
        messageText: "Message Text",
        characters: "characters",
        sendPush: "Send Notification",
        
        // Wallet
        walletTitle: "Wallet",
        connectWallet: "Connect Wallet",
        disconnectWallet: "Disconnect",
        walletConnected: "Wallet Connected",
        walletAddress: "Address",
        walletBalance: "Balance",
        activateLevel: "Activate Level",
        activationCost: "Cost",
        
        // Settings
        settingsTitle: "Settings",
        language: "Language",
        notifications: "Notifications",
        emailNotifications: "Email Notifications",
        pushNotifications: "Push Notifications",
        theme: "Theme",
        darkTheme: "Dark",
        lightTheme: "Light",
        saveSettings: "Save Settings",
        
        // CRM Modal
        crmTitle: "Contact Details",
        crmInfo: "Info",
        crmHistory: "History",
        crmNotes: "Notes",
        crmChat: "Chat",
        addNote: "Add Note",
        sendMessage: "Send",
        messagePlaceholder: "Type your message...",
        notePlaceholder: "Add a note about this contact...",
        
        // Import/Export
        importTitle: "Import Contacts",
        exportTitle: "Export Contacts",
        importDesc: "Upload CSV or Excel file with contacts",
        exportDesc: "Download all contacts in your preferred format",
        selectFile: "Select File",
        supportedFormats: "Supported: CSV, XLS, XLSX",
        exportCSV: "Export CSV",
        exportExcel: "Export Excel",
        
        // API Integration
        apiTitle: "API Integration",
        telegramBot: "Telegram Bot",
        whatsappApi: "WhatsApp API",
        emailApi: "Email API",
        apiKey: "API Key",
        botToken: "Bot Token",
        testConnection: "Test",
        saveApi: "Save",
        connected: "Connected",
        disconnected: "Not Connected",
        
        // Notifications
        success: "Success",
        error: "Error",
        copied: "Copied to clipboard",
        saved: "Settings saved",
        deleted: "Deleted successfully",
        sent: "Message sent",
        
        // Common
        loading: "Loading...",
        noData: "No data available",
        confirm: "Confirm",
        cancel: "Cancel",
        save: "Save",
        edit: "Edit",
        delete: "Delete",
        close: "Close",
        back: "Back",
        next: "Next",
        view: "View",
        download: "Download",
        upload: "Upload"
    },
    
    ru: {
        // Sidebar
        dashboard: "Панель управления",
        myTeam: "Моя команда",
        archive: "Архив",
        surveys: "Опросы",
        contacts: "Контакты",
        push: "Push-уведомления",
        wallet: "Кошелек",
        settings: "Настройки",
        logout: "Выход",
        
        // User Info
        userLevel: "Партнер",
        userId: "Ваш ID",
        
        // Dashboard Stats
        totalReferrals: "Всего рефералов",
        activeReferrals: "Активных рефералов",
        totalCards: "Всего открыток",
        totalViews: "Всего просмотров",
        monthlyIncome: "Доход за месяц",
        
        // Team Section
        teamTitle: "Моя команда",
        level: "Уровень",
        referrals: "Рефералы",
        searchPlaceholder: "Поиск по ID или кошельку...",
        filterAll: "Все",
        filterActive: "Активные",
        filterInactive: "Неактивные",
        search: "Поиск",
        clear: "Очистить",
        
        // Table Headers
        tableId: "ID",
        tableWallet: "Кошелек",
        tableStatus: "Статус",
        tableLevel: "Уровень",
        tableReferrals: "Рефералы",
        tableCards: "Открытки",
        tableDate: "Дата регистрации",
        tableActions: "Действия",
        
        // Status
        statusActive: "Активен",
        statusInactive: "Неактивен",
        statusCoauthor: "Соавтор",
        statusSuper: "Супер Админ",
        statusMini: "Мини Админ",
        statusBasic: "Базовый",
        
        // Archive
        archiveTitle: "Архив открыток",
        cardViews: "просмотров",
        cardShares: "отправлено",
        shareCard: "Поделиться",
        openCard: "Открыть",
        deleteCard: "Удалить",
        noCards: "Пока нет открыток",
        createFirst: "Создайте свою первую открытку!",
        
        // Surveys
        surveysTitle: "Опросы",
        surveyVotes: "голосов",
        surveyEnds: "Завершится",
        vote: "Голосовать",
        viewResults: "Результаты",
        createSurvey: "Создать опрос",
        
        // Contacts Section
        contactsTitle: "Контакты",
        allContacts: "Все контакты",
        telegram: "Telegram",
        whatsapp: "WhatsApp",
        email: "Email",
        instagram: "Instagram",
        facebook: "Facebook",
        tiktok: "TikTok",
        twitter: "Twitter",
        viber: "Viber",
        importContacts: "Импорт",
        exportContacts: "Экспорт",
        
        // Contact Table
        contactName: "Имя",
        contactPlatform: "Платформа",
        contactHandle: "Контакт",
        contactConsent: "Согласие",
        contactNotes: "Заметки",
        contactAdded: "Добавлен",
        consentYes: "Да",
        consentNo: "Нет",
        
        // Push Notifications
        pushTitle: "Push-уведомления",
        pushLimits: "Дневной лимит: 100 уведомлений. Осталось сегодня:",
        selectAudience: "Выберите аудиторию",
        allUsers: "Все пользователи",
        activeOnly: "Только активные",
        newUsers: "Новые (7 дней)",
        customGroup: "Своя группа",
        createGroup: "Создать группу",
        groupName: "Название группы",
        messageTitle: "Заголовок уведомления",
        messageText: "Текст сообщения",
        characters: "символов",
        sendPush: "Отправить уведомление",
        
        // Wallet
        walletTitle: "Кошелек",
        connectWallet: "Подключить кошелек",
        disconnectWallet: "Отключить",
        walletConnected: "Кошелек подключен",
        walletAddress: "Адрес",
        walletBalance: "Баланс",
        activateLevel: "Активировать уровень",
        activationCost: "Стоимость",
        
        // Settings
        settingsTitle: "Настройки",
        language: "Язык",
        notifications: "Уведомления",
        emailNotifications: "Email уведомления",
        pushNotifications: "Push уведомления",
        theme: "Тема",
        darkTheme: "Темная",
        lightTheme: "Светлая",
        saveSettings: "Сохранить настройки",
        
        // CRM Modal
        crmTitle: "Детали контакта",
        crmInfo: "Инфо",
        crmHistory: "История",
        crmNotes: "Заметки",
        crmChat: "Чат",
        addNote: "Добавить заметку",
        sendMessage: "Отправить",
        messagePlaceholder: "Введите сообщение...",
        notePlaceholder: "Добавьте заметку об этом контакте...",
        
        // Import/Export
        importTitle: "Импорт контактов",
        exportTitle: "Экспорт контактов",
        importDesc: "Загрузите CSV или Excel файл с контактами",
        exportDesc: "Скачайте все контакты в удобном формате",
        selectFile: "Выбрать файл",
        supportedFormats: "Поддерживаются: CSV, XLS, XLSX",
        exportCSV: "Экспорт CSV",
        exportExcel: "Экспорт Excel",
        
        // API Integration
        apiTitle: "Интеграция API",
        telegramBot: "Telegram бот",
        whatsappApi: "WhatsApp API",
        emailApi: "Email API",
        apiKey: "API ключ",
        botToken: "Токен бота",
        testConnection: "Тест",
        saveApi: "Сохранить",
        connected: "Подключено",
        disconnected: "Не подключено",
        
        // Notifications
        success: "Успешно",
        error: "Ошибка",
        copied: "Скопировано в буфер",
        saved: "Настройки сохранены",
        deleted: "Успешно удалено",
        sent: "Сообщение отправлено",
        
        // Common
        loading: "Загрузка...",
        noData: "Нет данных",
        confirm: "Подтвердить",
        cancel: "Отмена",
        save: "Сохранить",
        edit: "Редактировать",
        delete: "Удалить",
        close: "Закрыть",
        back: "Назад",
        next: "Далее",
        view: "Просмотр",
        download: "Скачать",
        upload: "Загрузить"
    },
    
    ua: {
        // Sidebar
        dashboard: "Панель керування",
        myTeam: "Моя команда",
        archive: "Архів",
        surveys: "Опитування",
        contacts: "Контакти",
        push: "Push-сповіщення",
        wallet: "Гаманець",
        settings: "Налаштування",
        logout: "Вихід",
        
        // User Info
        userLevel: "Партнер",
        userId: "Ваш ID",
        
        // Dashboard Stats
        totalReferrals: "Всього рефералів",
        activeReferrals: "Активних рефералів",
        totalCards: "Всього листівок",
        totalViews: "Всього переглядів",
        monthlyIncome: "Дохід за місяць",
        
        // Team Section
        teamTitle: "Моя команда",
        level: "Рівень",
        referrals: "Реферали",
        searchPlaceholder: "Пошук за ID або гаманцем...",
        filterAll: "Всі",
        filterActive: "Активні",
        filterInactive: "Неактивні",
        search: "Пошук",
        clear: "Очистити",
        
        // Table Headers
        tableId: "ID",
        tableWallet: "Гаманець",
        tableStatus: "Статус",
        tableLevel: "Рівень",
        tableReferrals: "Реферали",
        tableCards: "Листівки",
        tableDate: "Дата реєстрації",
        tableActions: "Дії",
        
        // Status
        statusActive: "Активний",
        statusInactive: "Неактивний",
        statusCoauthor: "Співавтор",
        statusSuper: "Супер Адмін",
        statusMini: "Міні Адмін",
        statusBasic: "Базовий",
        
        // Archive
        archiveTitle: "Архів листівок",
        cardViews: "переглядів",
        cardShares: "надіслано",
        shareCard: "Поділитися",
        openCard: "Відкрити",
        deleteCard: "Видалити",
        noCards: "Поки немає листівок",
        createFirst: "Створіть свою першу листівку!",
        
        // Surveys
        surveysTitle: "Опитування",
        surveyVotes: "голосів",
        surveyEnds: "Завершиться",
        vote: "Голосувати",
        viewResults: "Результати",
        createSurvey: "Створити опитування",
        
        // Contacts Section
        contactsTitle: "Контакти",
        allContacts: "Всі контакти",
        telegram: "Telegram",
        whatsapp: "WhatsApp",
        email: "Email",
        instagram: "Instagram",
        facebook: "Facebook",
        tiktok: "TikTok",
        twitter: "Twitter",
        viber: "Viber",
        importContacts: "Імпорт",
        exportContacts: "Експорт",
        
        // Contact Table
        contactName: "Ім'я",
        contactPlatform: "Платформа",
        contactHandle: "Контакт",
        contactConsent: "Згода",
        contactNotes: "Нотатки",
        contactAdded: "Додано",
        consentYes: "Так",
        consentNo: "Ні",
        
        // Push Notifications
        pushTitle: "Push-сповіщення",
        pushLimits: "Денний ліміт: 100 сповіщень. Залишилось сьогодні:",
        selectAudience: "Оберіть аудиторію",
        allUsers: "Всі користувачі",
        activeOnly: "Тільки активні",
        newUsers: "Нові (7 днів)",
        customGroup: "Своя група",
        createGroup: "Створити групу",
        groupName: "Назва групи",
        messageTitle: "Заголовок сповіщення",
        messageText: "Текст повідомлення",
        characters: "символів",
        sendPush: "Надіслати сповіщення",
        
        // Wallet
        walletTitle: "Гаманець",
        connectWallet: "Підключити гаманець",
        disconnectWallet: "Відключити",
        walletConnected: "Гаманець підключено",
        walletAddress: "Адреса",
        walletBalance: "Баланс",
        activateLevel: "Активувати рівень",
        activationCost: "Вартість",
        
        // Settings
        settingsTitle: "Налаштування",
        language: "Мова",
        notifications: "Сповіщення",
        emailNotifications: "Email сповіщення",
        pushNotifications: "Push сповіщення",
        theme: "Тема",
        darkTheme: "Темна",
        lightTheme: "Світла",
        saveSettings: "Зберегти налаштування",
        
        // CRM Modal
        crmTitle: "Деталі контакту",
        crmInfo: "Інфо",
        crmHistory: "Історія",
        crmNotes: "Нотатки",
        crmChat: "Чат",
        addNote: "Додати нотатку",
        sendMessage: "Надіслати",
        messagePlaceholder: "Введіть повідомлення...",
        notePlaceholder: "Додайте нотатку про цей контакт...",
        
        // Import/Export
        importTitle: "Імпорт контактів",
        exportTitle: "Експорт контактів",
        importDesc: "Завантажте CSV або Excel файл з контактами",
        exportDesc: "Завантажте всі контакти у зручному форматі",
        selectFile: "Обрати файл",
        supportedFormats: "Підтримуються: CSV, XLS, XLSX",
        exportCSV: "Експорт CSV",
        exportExcel: "Експорт Excel",
        
        // API Integration
        apiTitle: "Інтеграція API",
        telegramBot: "Telegram бот",
        whatsappApi: "WhatsApp API",
        emailApi: "Email API",
        apiKey: "API ключ",
        botToken: "Токен бота",
        testConnection: "Тест",
        saveApi: "Зберегти",
        connected: "Підключено",
        disconnected: "Не підключено",
        
        // Notifications
        success: "Успішно",
        error: "Помилка",
        copied: "Скопійовано в буфер",
        saved: "Налаштування збережено",
        deleted: "Успішно видалено",
        sent: "Повідомлення надіслано",
        
        // Common
        loading: "Завантаження...",
        noData: "Немає даних",
        confirm: "Підтвердити",
        cancel: "Скасувати",
        save: "Зберегти",
        edit: "Редагувати",
        delete: "Видалити",
        close: "Закрити",
        back: "Назад",
        next: "Далі",
        view: "Перегляд",
        download: "Завантажити",
        upload: "Завантажити"
    }
};

// Current language
let currentLang = localStorage.getItem('cardgift_lang') || 'en';

/**
 * Get translation by key
 */
function t(key) {
    return translations[currentLang]?.[key] || translations.en[key] || key;
}

/**
 * Switch language
 */
function switchLanguage(lang) {
    if (!translations[lang]) return;
    
    currentLang = lang;
    localStorage.setItem('cardgift_lang', lang);
    
    // Update language buttons
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.id === `lang${lang.charAt(0).toUpperCase() + lang.slice(1)}`);
    });
    
    // Update all translatable elements
    applyTranslations();
    
    // Dispatch event for custom handlers
    window.dispatchEvent(new CustomEvent('languageChanged', { detail: { lang } }));
}

/**
 * Apply translations to DOM
 */
function applyTranslations() {
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.dataset.i18n;
        if (translations[currentLang]?.[key]) {
            el.textContent = translations[currentLang][key];
        }
    });
    
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.dataset.i18nPlaceholder;
        if (translations[currentLang]?.[key]) {
            el.placeholder = translations[currentLang][key];
        }
    });
    
    document.querySelectorAll('[data-i18n-title]').forEach(el => {
        const key = el.dataset.i18nTitle;
        if (translations[currentLang]?.[key]) {
            el.title = translations[currentLang][key];
        }
    });
}

/**
 * Initialize translations on DOM ready
 */
function initTranslations() {
    // Set initial language button state
    document.querySelectorAll('.lang-btn').forEach(btn => {
        const lang = btn.id.replace('lang', '').toLowerCase();
        btn.classList.toggle('active', lang === currentLang);
        btn.onclick = () => switchLanguage(lang);
    });
    
    // Apply translations
    applyTranslations();
}

// Auto-init when DOM is ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initTranslations);
} else {
    initTranslations();
}

// Export for module usage
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { translations, t, switchLanguage, currentLang };
}
