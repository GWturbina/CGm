/* =====================================================
   CONTENT FILTER - –§–∏–ª—å—Ç—Ä –∑–∞–ø—Ä–µ—â—ë–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
   v1.0 –¥–ª—è GlobalStudio / AI Studio
   
   –ë–ª–æ–∫–∏—Ä—É–µ—Ç:
   - –ú–∞—Ç –∏ –Ω–µ—Ü–µ–Ω–∑—É—Ä–Ω—É—é –ª–µ–∫—Å–∏–∫—É
   - –ù–∞—Å–∏–ª–∏–µ
   - –ü–æ—Ä–Ω–æ–≥—Ä–∞—Ñ–∏—è –∏ —Ä–∞–∑–≤—Ä–∞—Ç
   - –õ–ì–ë–¢ –ø—Ä–æ–ø–∞–≥–∞–Ω–¥–∞
   - –ú–µ–∂–Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –≤—Ä–∞–∂–¥–∞
   - –≠–∫—Å—Ç—Ä–µ–º–∏–∑–º
   ===================================================== */

const ContentFilter = {
    
    // –ú–∞—Ç (—Ä—É—Å—Å–∫–∏–π + –∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
    matRoots: [
        '—Ö—É–π', '—Ö—É—è', '—Ö—É–µ', '—Ö—É–∏', '—Ö—É—é',
        '–ø–∏–∑–¥', '–ø–µ–∑–¥',
        '–±–ª—è—Ç—å', '–±–ª—è–¥—å', '–±–ª—è–¥', '–±–ª—è—Ç',
        '–µ–±–∞—Ç', '–µ–±–∞–ª', '–µ–±–∞–Ω', '–µ–±–Ω—É', '–µ–±—ë—Ç', '–µ–±–µ—Ç', '–µ–±–ª–∏', '–µ–±–ª–∞', '–µ–±–ª–æ', '–µ–±—É—á', '—ë–±', '–µ|–±',
        '—Å—É–∫–∞', '—Å—É—á–∫', '—Å—É—á–∞—Ä',
        '–º—É–¥–∞–∫', '–º—É–¥–∞—á', '–º—É–¥–∏–ª', '–º—É–¥–æ',
        '–ø–∏–¥–æ—Ä', '–ø–∏–¥–∞—Ä', '–ø–∏–¥—Ä', '–ø–µ–¥–∏–∫', '–ø–µ–¥–µ—Ä',
        '–∑–∞–ª—É–ø', '–∂–æ–ø–∞', '–∂–æ–ø',
        '—Å—Ä–∞—Ç—å', '—Å—Ä–∞–ª', '—Å—Ä–∞–Ω', '–∑–∞—Å—Ä–∞–Ω',
        '–¥–µ—Ä—å–º', '–≥–æ–≤–Ω–æ', '–≥–æ–≤—ë–Ω', '–≥–æ–≤–Ω',
        '—Ç—Ä–∞—Ö', '–≤—ã–µ–±', '–∑–∞–µ–±', '–Ω–∞–µ–±', '–æ—Ç—ä–µ–±', '–ø–æ–¥—ä–µ–±', '—Ä–∞–∑—ä–µ–±', '—É–µ–±', '–≤—ä–µ–±', '–¥–æ–µ–±',
        '–¥–æ–ª–±–æ', '–¥–æ–ª–±–∞–Ω', '–¥–æ–ª–±–∞—ë',
        'fuck', 'shit', 'bitch', 'asshole', 'dick', 'cock', 'pussy', 'cunt', 'whore',
        '–Ω–∏–≥–µ—Ä', '–Ω–∏–≥–≥–µ—Ä', 'nigger', 'nigga'
    ],
    
    // –ù–∞—Å–∏–ª–∏–µ
    violenceWords: [
        '—É–±–∏—Ç—å', '—É–±–µ–π', '—É–±–∏–π—Å—Ç–≤', '—É–±–∏–≤–∞—é', '—É–±–∏–≤–∞',
        '–∑–∞—Ä–µ–∑–∞—Ç—å', '–∑–∞—Ä–µ–∂—É', '–∑–∞—Ä–µ–∑–∞–ª',
        '–∑–∞—Å—Ç—Ä–µ–ª–∏—Ç—å', '–∑–∞—Å—Ç—Ä–µ–ª—é', '—Ä–∞—Å—Å—Ç—Ä–µ–ª',
        '–≤–∑–æ—Ä–≤–∞—Ç—å', '–≤–∑–æ—Ä–≤—É', '–≤–∑—Ä—ã–≤', '–±–æ–º–±–∞', '–±–æ–º–±',
        '–æ—Ç—Ä–∞–≤–∏—Ç—å', '–æ—Ç—Ä–∞–≤',
        '–ø—ã—Ç–∞—Ç—å', '–ø—ã—Ç–∫', '–º—É—á–∏—Ç—å', '–º—É—á–µ–Ω–∏',
        '–Ω–∞—Å–∏–ª–æ–≤–∞—Ç—å', '–∏–∑–Ω–∞—Å–∏–ª', '–Ω–∞—Å–∏–ª—å–Ω',
        '–∏–∑–±–∏—Ç—å', '–∏–∑–±–∏–µ–Ω–∏',
        '—Ç–µ—Ä—Ä–æ—Ä–∏–∑–º', '—Ç–µ—Ä—Ä–æ—Ä–∏—Å—Ç', '—Ç–µ—Ä–∞–∫—Ç',
        '–≥–µ–Ω–æ—Ü–∏–¥', '—Ö–æ–ª–æ–∫–æ—Å—Ç',
        '—Å—É–∏—Ü–∏–¥', '—Å–∞–º–æ—É–±–∏–π', '–ø–æ–≤–µ—Å–∏—Ç—å—Å—è', '–ø–æ–≤–µ—à—É', '–≤—Å–∫—Ä—ã—Ç—å –≤–µ–Ω—ã',
        'kill', 'murder', 'rape', 'torture', 'terrorist', 'bomb', 'suicide'
    ],
    
    // –ü–æ—Ä–Ω–æ–≥—Ä–∞—Ñ–∏—è –∏ —Ä–∞–∑–≤—Ä–∞—Ç
    adultWords: [
        '–ø–æ—Ä–Ω–æ', '–ø–æ—Ä–Ω', 'porn',
        '—Å–µ–∫—Å —Å', '—Ç—Ä–∞—Ö–∞—Ç—å', '—Ç—Ä–∞—Ö–∞—é', '—Ç—Ä–∞—Ö–Ω–∏',
        '–æ—Ä–≥–∏—è', '–æ—Ä–≥–∞–∑–º',
        '–º–∏–Ω–µ—Ç', '–æ—Ç—Å–æ—Å', '—Å–æ—Å–∞—Ç—å —á–ª–µ–Ω',
        '–∞–Ω–∞–ª', '–∞–Ω–∞–ª—å–Ω',
        '–∏–Ω—Ü–µ—Å—Ç',
        '–ø–µ–¥–æ—Ñ–∏–ª', '–º–∞–ª–æ–ª–µ—Ç', '–Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–ª–µ—Ç',
        '–≥–æ–ª–∞—è', '–≥–æ–ª—ã–π', '–æ–±–Ω–∞–∂—ë–Ω', '–æ–±–Ω–∞–∂–µ–Ω', 'nude', 'naked',
        '—ç—Ä–æ—Ç–∏–∫', 'erotic', 'xxx', 'adult content',
        '–ø—Ä–æ—Å—Ç–∏—Ç—É', '—à–ª—é—Ö–∞', '–¥–∞–≤–∞–ª–∫',
        '—Å–ø–µ—Ä–º–∞', '–∫–æ–Ω—á–∏—Ç—å –Ω–∞', '–∫–æ–Ω—á–∞—é',
        'hentai', '—Ö–µ–Ω—Ç–∞–π',
        '—Ä–∞–∑–≤—Ä–∞—Ç–Ω', '–∏–∑–≤—Ä–∞—â–µ–Ω'
    ],
    
    // –õ–ì–ë–¢ –ø—Ä–æ–ø–∞–≥–∞–Ω–¥–∞
    lgbtPropaganda: [
        '–≥–µ–π –ø–∞—Ä–∞–¥', '–≥–µ–π-–ø–∞—Ä–∞–¥', '–ø—Ä–∞–π–¥',
        '—Å–º–µ–Ω–∞ –ø–æ–ª–∞', '—Ç—Ä–∞–Ω—Å–≥–µ–Ω–¥–µ—Ä', '—Ç—Ä–∞–Ω—Å—Å–µ–∫—Å—É–∞–ª',
        '–æ–¥–Ω–æ–ø–æ–ª—ã–π –±—Ä–∞–∫', '–æ–¥–Ω–æ–ø–æ–ª—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è',
        '–ª–µ—Å–±–∏–π—Å–∫', '–≥–æ–º–æ—Å–µ–∫—Å—É–∞–ª',
        '–ª–≥–±—Ç', 'lgbtq',
        '–≥–µ–π –ª—é–±–æ–≤—å', '–ª–µ—Å–±–∏ –ª—é–±–æ–≤—å',
        '–∫–≤–∏—Ä', 'queer'
    ],
    
    // –ú–µ–∂–Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –≤—Ä–∞–∂–¥–∞
    hateSpeech: [
        '—Ö–æ—Ö–æ–ª', '—Ö–æ—Ö–ª', '—É–∫—Ä–æ–ø', '–±–∞–Ω–¥–µ—Ä–æ–≤–µ—Ü',
        '–º–æ—Å–∫–∞–ª—å', '–∫–∞—Ü–∞–ø', '—Ä–∞—à–∏—Å—Ç',
        '—á—É—Ä–∫–∞', '—á—É—Ä–∫', '—á–µ—Ä–Ω–æ–∂–æ–ø', '—á–µ—Ä–Ω–æ–∂',
        '–∂–∏–¥', '–∂—ã–¥', '–µ–≤—Ä–µ–π—Å–∫ –∑–∞–≥–æ–≤–æ—Ä',
        '–∞—Ä–º—è—à–∫', '–∞–∑–µ—Ä',
        '—Å–º–µ—Ä—Ç—å –≤—Å–µ–º', '—É–±–∏–≤–∞—Ç—å –≤—Å–µ—Ö',
        '–Ω–µ–Ω–∞–≤–∏–∂—É –≤—Å–µ—Ö', '—É–Ω–∏—á—Ç–æ–∂–∏—Ç—å –≤—Å–µ—Ö',
        '—Ä–∞—Å–æ–≤ –ø—Ä–µ–≤–æ—Å—Ö–æ–¥', '–±–µ–ª–∞—è —Ä–∞—Å–∞', '–∞—Ä–∏–π—Å–∫',
        'nazi', '–Ω–∞—Ü–∏—Å—Ç', '—Ñ–∞—à–∏—Å—Ç', '—Å–≤–∞—Å—Ç–∏–∫', '–∑–∏–≥ —Ö–∞–π–ª', 'heil', 'sieg'
    ],
    
    // –ù–∞—Ä–∫–æ—Ç–∏–∫–∏
    drugsWords: [
        '–Ω–∞—Ä–∫–æ—Ç–∏–∫', '–Ω–∞—Ä–∫–æ—Ç', '–Ω–∞—Ä–∫–æ',
        '–≥–µ—Ä–æ–∏–Ω', '–∫–æ–∫–∞–∏–Ω', '–º–µ—Ç–∞–º—Ñ–µ—Ç–∞–º–∏–Ω',
        '–º–∞—Ä–∏—Ö—É–∞–Ω', '–∫–æ–Ω–æ–ø–ª', '–≥–∞—à–∏—à', '—Ç—Ä–∞–≤–∫–∞',
        '—ç–∫—Å—Ç–∞–∑–∏', '–ª—Å–¥', 'lsd',
        '–∑–∞–∫–ª–∞–¥–∫', '–±–∞—Ä—ã–≥–∞', '–¥–∏–ª–µ—Ä',
        '—Å–∏–Ω—Ç–µ—Ç–∏–∫', '—Å–ø–∞–π—Å', '—Å–æ–ª—å –¥–ª—è –≤–∞–Ω–Ω'
    ],
    
    // –≠–∫—Å—Ç—Ä–µ–º–∏–∑–º
    extremismWords: [
        '–¥–∂–∏—Ö–∞–¥', '—à–∞—Ö–∏–¥', '–∏–≥–∏–ª', 'isis', '—Ç–∞–ª–∏–±–∞–Ω',
        '–≤–∑–æ—Ä–≤–∞—Ç—å –∑–¥–∞–Ω–∏–µ', '–≤–∑–æ—Ä–≤–∞—Ç—å —à–∫–æ–ª', '–≤–∑–æ—Ä–≤–∞—Ç—å –º–µ—Ç—Ä–æ',
        '–º–∞—Å—Å–æ–≤—ã–π —Ä–∞—Å—Å—Ç—Ä–µ–ª', '—Å—Ç—Ä–µ–ª—å–±–∞ –≤ —à–∫–æ–ª–µ',
        '–∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å –±–æ–º–±—É', '–∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å –≤–∑—Ä—ã–≤—á–∞—Ç–∫—É',
        '—Ä–µ—Ü–µ–ø—Ç —è–¥–∞', '–∫–∞–∫ –æ—Ç—Ä–∞–≤–∏—Ç—å'
    ],
    
    /**
     * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—Å—Ç –Ω–∞ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
     * @param {string} text - –¢–µ–∫—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
     * @returns {object} { allowed: boolean, reason: string, category: string }
     */
    check(text) {
        if (!text || typeof text !== 'string') {
            return { allowed: true, reason: null, category: null };
        }
        
        const normalized = this.normalizeText(text);
        
        const checks = [
            { words: this.matRoots, category: 'mat', reason: '–ù–µ—Ü–µ–Ω–∑—É—Ä–Ω–∞—è –ª–µ–∫—Å–∏–∫–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–∞' },
            { words: this.violenceWords, category: 'violence', reason: '–ö–æ–Ω—Ç–µ–Ω—Ç —Å –Ω–∞—Å–∏–ª–∏–µ–º –∑–∞–ø—Ä–µ—â—ë–Ω' },
            { words: this.adultWords, category: 'adult', reason: '–ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –≤–∑—Ä–æ—Å–ª—ã—Ö –∑–∞–ø—Ä–µ—â—ë–Ω' },
            { words: this.lgbtPropaganda, category: 'lgbt', reason: '–î–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –∑–∞–ø—Ä–µ—â—ë–Ω' },
            { words: this.hateSpeech, category: 'hate', reason: '–†–∞–∑–∂–∏–≥–∞–Ω–∏–µ –Ω–µ–Ω–∞–≤–∏—Å—Ç–∏ –∑–∞–ø—Ä–µ—â–µ–Ω–æ' },
            { words: this.drugsWords, category: 'drugs', reason: '–ö–æ–Ω—Ç–µ–Ω—Ç –æ –Ω–∞—Ä–∫–æ—Ç–∏–∫–∞—Ö –∑–∞–ø—Ä–µ—â—ë–Ω' },
            { words: this.extremismWords, category: 'extremism', reason: '–≠–∫—Å—Ç—Ä–µ–º–∏—Å—Ç—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –∑–∞–ø—Ä–µ—â—ë–Ω' }
        ];
        
        for (const check of checks) {
            const found = this.findForbiddenWord(normalized, check.words);
            if (found) {
                console.log(`üö´ ContentFilter: blocked "${found}" (${check.category})`);
                return {
                    allowed: false,
                    reason: check.reason,
                    category: check.category,
                    word: found
                };
            }
        }
        
        return { allowed: true, reason: null, category: null };
    },
    
    isAllowed(text) {
        return this.check(text).allowed;
    },
    
    normalizeText(text) {
        return text
            .toLowerCase()
            .replace(/0/g, '–æ')
            .replace(/1/g, 'i')
            .replace(/3/g, '–µ')
            .replace(/4/g, '–∞')
            .replace(/5/g, 's')
            .replace(/6/g, '–±')
            .replace(/7/g, 't')
            .replace(/8/g, '–≤')
            .replace(/@/g, '–∞')
            .replace(/\$/g, 's')
            .replace(/a/g, '–∞')
            .replace(/e/g, '–µ')
            .replace(/o/g, '–æ')
            .replace(/p/g, '—Ä')
            .replace(/c/g, '—Å')
            .replace(/x/g, '—Ö')
            .replace(/y/g, '—É')
            .replace(/k/g, '–∫')
            .replace(/m/g, '–º')
            .replace(/h/g, '–Ω')
            .replace(/b/g, '–±')
            .replace(/(.)\1{2,}/g, '$1$1')
            .replace(/\s+/g, ' ')
            .trim();
    },
    
    findForbiddenWord(normalizedText, wordList) {
        const noSpaces = normalizedText.replace(/\s/g, '');
        
        for (const word of wordList) {
            const wordLower = word.toLowerCase();
            
            if (normalizedText.includes(wordLower)) {
                return word;
            }
            
            if (noSpaces.includes(wordLower.replace(/\s/g, ''))) {
                return word;
            }
        }
        
        return null;
    },
    
    addWord(category, word) {
        const categories = {
            'mat': this.matRoots,
            'violence': this.violenceWords,
            'adult': this.adultWords,
            'lgbt': this.lgbtPropaganda,
            'hate': this.hateSpeech,
            'drugs': this.drugsWords,
            'extremism': this.extremismWords
        };
        
        if (categories[category]) {
            categories[category].push(word.toLowerCase());
            console.log(`‚úÖ Added "${word}" to ${category}`);
            return true;
        }
        return false;
    }
};

window.ContentFilter = ContentFilter;
console.log('üõ°Ô∏è ContentFilter v1.0 loaded');
