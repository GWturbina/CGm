// api/academy-reminders.js
// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
// ะกะะกะขะะะ ะะะะะะะะะะะ ะะ 21-ะะะะะะะ ะะะะะะะะะ CARDGIFT ACADEMY
// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
// ะัะทัะฒะฐัั ัะตัะตะท Vercel Cron: 2 ัะฐะทะฐ ะฒ ะดะตะฝั (ัััะพ ะธ ะฒะตัะตั)
// cron: 0 9,20 * * *  (9:00 ะธ 20:00 UTC)

import { createClient } from '@supabase/supabase-js';

const supabaseUrl = process.env.SUPABASE_URL || 'https://imgpysvdosdsqucoghqa.supabase.co';
const supabaseKey = process.env.SUPABASE_SERVICE_KEY || process.env.SUPABASE_ANON_KEY;
const supabase = createClient(supabaseUrl, supabaseKey);

const PLATFORM_URL = 'https://cgm-brown.vercel.app';

// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
// ะะะะขะะะข ะะะะะะะะะะะ ะะะฏ ะะะะะะะ ะะะฏ (21 ะดะตะฝั)
// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

const DAY_REMINDERS = {
    // โโโ ะะะะะะฏ 1: ะกะขะะะข โโโ
    1: {
        morning: {
            title: '๐ ะะตะฝั 1 โ ะขะฒะพะน ะฟะตัะฒัะน ัะฐะณ!',
            text: `ะัะธะฒะตั! ะกะตะณะพะดะฝั ะฝะฐัะธะฝะฐะตััั ัะฒะพะน ะฟััั ะฒ CardGift.

๐ ะะฐะดะฐัะธ ะฝะฐ ัะตะณะพะดะฝั:
โข ะะทััะธ ะธะฝัะตััะตะนั ะปะธัะฝะพะณะพ ะบะฐะฑะธะฝะตัะฐ
โข ะะฐะฟะพะปะฝะธ ะฟัะพัะธะปั
โข ะกะพะทะดะฐะน ะฟะตัะฒัั ัะตััะพะฒัั ะพัะบัััะบั

๐ก ะกะพะฒะตั ะดะฝั: ะะต ัะฟะตัะธ, ะธะทััะธ ะฒัั ะฒะฝะธะผะฐัะตะปัะฝะพ. ะคัะฝะดะฐะผะตะฝั ะฒะฐะถะตะฝ!`,
            button: '๐ ะะฐัะฐัั ะะตะฝั 1'
        },
        evening: {
            title: '๐ ะะตะฝั 1 โ ะะต ะทะฐะฑัะดั ะพััะธัะฐัััั!',
            text: `ะขั ะฒัะฟะพะปะฝะธะป ะทะฐะดะฐะฝะธั ะฟะตัะฒะพะณะพ ะดะฝั?

ะะฐะถะผะธ ะบะฝะพะฟะบั ะฝะธะถะต, ะพัะผะตัั ััะพ ัะดะตะปะฐะป ะธ ะฟะพะปััะธ ะดะพัััะฟ ะบ ะะฝั 2!

โฐ ะะตะฝั ะทะฐััะธััะฒะฐะตััั ัะพะปัะบะพ ะฟะพัะปะต ะพััััะฐ.`,
            button: 'โ ะกะดะฐัั ะพัััั ะะฝั 1'
        },
        completed: {
            title: '๐ ะะตะฝั 1 ะทะฐะฒะตัััะฝ!',
            text: `ะะพะทะดัะฐะฒะปัั! ะะตัะฒัะน ัะฐะณ ัะดะตะปะฐะฝ.

ะะฐะฒััะฐ ัะตะฑั ะถะดัั ะะตะฝั 2 โ ัะพะทะดะฐะฝะธะต ะฟะตัะฒะพะน ะฝะฐััะพััะตะน ะพัะบัััะบะธ!

๐ฅ ะัะปะธัะฝะพะต ะฝะฐัะฐะปะพ! ะขะฐะบ ะดะตัะถะฐัั!`,
            button: '๐ ะะพะน ะฟัะพะณัะตัั'
        }
    },
    
    2: {
        morning: {
            title: '๐จ ะะตะฝั 2 โ ะขะฒะพั ะฟะตัะฒะฐั ะพัะบัััะบะฐ!',
            text: `ะะพะฑัะพะต ัััะพ! ะกะตะณะพะดะฝั ัะพะทะดะฐัะผ ะฟะตัะฒัั ัะตะฐะปัะฝัั ะพัะบัััะบั.

๐ ะะฐะดะฐัะธ:
โข ะัะฑะตัะธ ะฟะพะฒะพะด (ะดะตะฝั ัะพะถะดะตะฝะธั, ะฟัะฐะทะดะฝะธะบ)
โข ะกะพะทะดะฐะน ะพัะบัััะบั ั ะฒะธะดะตะพ ะธะปะธ ะบะฐััะธะฝะบะพะน
โข ะะฐะฟะธัะธ ัะตะฟะปัััะธะน ัะปะพะณะฐะฝ
โข ะะฐัััะพะน ะฟัะธะทัะฒ ะบ ะดะตะนััะฒะธั

๐ก ะกะพะฒะตั: ะัะบัััะบะฐ ะดะพะปะถะฝะฐ ะฒัะทัะฒะฐัั ัะผะพัะธะธ!`,
            button: '๐จ ะกะพะทะดะฐัั ะพัะบัััะบั'
        },
        evening: {
            title: '๐ ะะตะฝั 2 โ ะัะบัััะบะฐ ะณะพัะพะฒะฐ?',
            text: `ะกะพะทะดะฐะป ัะฒะพั ะฟะตัะฒัั ะพัะบัััะบั?

ะััะธัะฐะนัั ะธ ะฟะตัะตัะพะดะธ ะบ ัะปะตะดัััะตะผั ะดะฝั! ะะฟะตัะตะดะธ โ ะพัะฟัะฐะฒะบะฐ ะธ ะฟะตัะฒัะต ัะตะทัะปััะฐัั.`,
            button: 'โ ะกะดะฐัั ะพัััั ะะฝั 2'
        },
        completed: {
            title: '๐ ะะตะฝั 2 ะทะฐะฒะตัััะฝ!',
            text: `ะกัะฟะตั! ะขะฒะพั ะฟะตัะฒะฐั ะพัะบัััะบะฐ ัะพะทะดะฐะฝะฐ.

ะะฐะฒััะฐ ะฝะฐััะธัััั ะพัะฟัะฐะฒะปััั ะตั ะธ ะฟะพะปััะฐัั ะฟะตัะฒัะต ะบะพะฝัะฐะบัั!`,
            button: '๐ ะะพะน ะฟัะพะณัะตัั'
        }
    },
    
    3: {
        morning: {
            title: '๐ค ะะตะฝั 3 โ ะะตัะฒะฐั ะพัะฟัะฐะฒะบะฐ!',
            text: `ะกะตะณะพะดะฝั ะพัะฟัะฐะฒะปัะตะผ ะพัะบัััะบั ัะตะฐะปัะฝะพะผั ัะตะปะพะฒะตะบั!

๐ ะะฐะดะฐัะธ:
โข ะัะฑะตัะธ ะฟะพะปััะฐัะตะปั (ะดััะณ, ะทะฝะฐะบะพะผัะน)
โข ะัะฟัะฐะฒั ะพัะบัััะบั ัะตัะตะท ะผะตััะตะฝะดะถะตั
โข ะะพัะผะพััะธ ะบะฐะบ ะพะฝะฐ ะฒัะณะปัะดะธั ะณะปะฐะทะฐะผะธ ะฟะพะปััะฐัะตะปั

๐ก ะะต ะฑะพะนัั! ะญัะพ ะฟัะพััะพ ะบัะฐัะธะฒะฐั ะพัะบัััะบะฐ ั ะฟะพะทะดัะฐะฒะปะตะฝะธะตะผ.`,
            button: '๐ค ะัะฟัะฐะฒะธัั ะพัะบัััะบั'
        },
        evening: {
            title: '๐ ะะตะฝั 3 โ ะัะฟัะฐะฒะธะป?',
            text: `ะัะบัััะบะฐ ัะปะตัะตะปะฐ ะบ ะฟะพะปััะฐัะตะปั?

ะะพะดะตะปะธัั ัะตะทัะปััะฐัะพะผ! ะะฐะบ ะพััะตะฐะณะธัะพะฒะฐะป ัะตะปะพะฒะตะบ?`,
            button: 'โ ะกะดะฐัั ะพัััั ะะฝั 3'
        },
        completed: {
            title: '๐ ะะตะฝั 3 ะทะฐะฒะตัััะฝ!',
            text: `ะะตัะฒะฐั ะพัะบัััะบะฐ ะพัะฟัะฐะฒะปะตะฝะฐ! ะขั ะผะพะปะพะดะตั!

ะะฐะฒััะฐ ะธะทััะธะผ ะบะฐะบ ัะดะตะปะฐัั ะพัะบัััะบั ะฒะธัััะฝะพะน ะธ ะฟะพะปััะฐัั ะบะพะฝัะฐะบัั ะฐะฒัะพะผะฐัะธัะตัะบะธ.`,
            button: '๐ ะะพะน ะฟัะพะณัะตัั'
        }
    },
    
    4: {
        morning: {
            title: '๐ ะะตะฝั 4 โ ะะธัััะฝัะน ะผะฐัะบะตัะธะฝะณ!',
            text: `ะกะตะณะพะดะฝั ะฒะบะปััะฐะตะผ ะผะฐะณะธั โ ะฒะธัััะฝะพะต ัะฐัะฟัะพัััะฐะฝะตะฝะธะต!

๐ ะะฐะดะฐัะธ:
โข ะะทััะธ ะผะตัะฐะฝะธะทะผ ะฒะธัััะฝะพััะธ
โข ะะฐัััะพะน ััะปะพะฒะธะต ะฟะพะปััะตะฝะธั ะพัะบัััะบะธ
โข ะะพะฑะฐะฒั popup ะฟัะธ ะทะฐะบัััะธะธ

๐ก ะะธัััะฝะพััั = ะพัะบัััะบะฐ ัะฐะผะฐ ะฟัะธะฒะพะดะธั ัะตะฑะต ะฝะพะฒัั ะปัะดะตะน!`,
            button: '๐ ะะฐัััะพะธัั ะฒะธัััะฝะพััั'
        },
        evening: {
            title: '๐ ะะตะฝั 4 โ ะะธัััะฝะพััั ะฝะฐัััะพะตะฝะฐ?',
            text: `ะะฐัััะพะธะป ะฒะธัััะฝัะน ะผะตัะฐะฝะธะทะผ?

ะขะตะฟะตัั ัะฒะพะธ ะพัะบัััะบะธ ะฑัะดัั ัะฐะฑะพัะฐัั ะฝะฐ ัะตะฑั 24/7!`,
            button: 'โ ะกะดะฐัั ะพัััั ะะฝั 4'
        },
        completed: {
            title: '๐ ะะตะฝั 4 ะทะฐะฒะตัััะฝ!',
            text: `ะะธัััะฝัะน ะผะตัะฐะฝะธะทะผ ะฐะบัะธะฒะธัะพะฒะฐะฝ!

ะะฐะฒััะฐ ะฝะฐัะธะฝะฐะตะผ ัะฐะฑะพัะฐัั ั ะบะพะฝัะฐะบัะฐะผะธ ะธ CRM.`,
            button: '๐ ะะพะน ะฟัะพะณัะตัั'
        }
    },
    
    5: {
        morning: {
            title: '๐ฅ ะะตะฝั 5 โ ะขะฒะพั ะฑะฐะทะฐ ะบะพะฝัะฐะบัะพะฒ!',
            text: `ะกะตะณะพะดะฝั ััะธะผัั ัะฐะฑะพัะฐัั ั CRM.

๐ ะะฐะดะฐัะธ:
โข ะะทััะธ ัะฐะทะดะตะป ะะพะฝัะฐะบัั
โข ะะฐะทะฑะตัะธัั ั ัะตะณะฐะผะธ (ะณะพัััะธะน/ััะฟะปัะน/ัะพะปะพะดะฝัะน)
โข ะะพะฑะฐะฒั ะทะฐะผะตัะบะธ ะบ ะบะพะฝัะฐะบัะฐะผ

๐ก ะะพะฝัะฐะบัั = ัะฒะพั ะทะพะปะพัะพ. ะะตัะตะณะธ ะธ ัะฐะฑะพัะฐะน ั ะฝะธะผะธ!`,
            button: '๐ฅ ะัะบัััั CRM'
        },
        evening: {
            title: '๐ ะะตะฝั 5 โ CRM ะพัะฒะพะธะป?',
            text: `ะะฐะทะพะฑัะฐะปัั ั ะบะพะฝัะฐะบัะฐะผะธ ะธ ัะตะณะฐะผะธ?

ะญัะพ ะฑะฐะทะฐ ัะฒะพะตะณะพ ะฑะธะทะฝะตัะฐ. ะะฐะถะฝะพ ะฟะพะฝััั ะปะพะณะธะบั!`,
            button: 'โ ะกะดะฐัั ะพัััั ะะฝั 5'
        },
        completed: {
            title: '๐ ะะตะฝั 5 ะทะฐะฒะตัััะฝ!',
            text: `CRM ะฟะพะด ะบะพะฝััะพะปะตะผ!

ะะฐะฒััะฐ โ ัะพะทะดะฐะฝะธะต ะพะฟัะพัะพะฒ ะดะปั ะบะฒะฐะปะธัะธะบะฐัะธะธ ะปะธะดะพะฒ.`,
            button: '๐ ะะพะน ะฟัะพะณัะตัั'
        }
    },
    
    6: {
        morning: {
            title: '๐ ะะตะฝั 6 โ ะะฟัะพัั ะธ ะบะฒะฐะปะธัะธะบะฐัะธั!',
            text: `ะกะตะณะพะดะฝั ัะพะทะดะฐัะผ ัะผะฝัะต ะพะฟัะพัั.

๐ ะะฐะดะฐัะธ:
โข ะกะพะทะดะฐะน ะพะฟัะพั ะธะท 5-7 ะฒะพะฟัะพัะพะฒ
โข ะัะพะดัะผะฐะน ััะพ ัะพัะตัั ัะทะฝะฐัั ะพ ัะตะปะพะฒะตะบะต
โข ะะฝัะตะณัะธััะน ะพะฟัะพั ะฒ ะพัะบัััะบั

๐ก ะะฟัะพั ัะธะปััััะตั ะปัะดะตะน โ ัั ะพะฑัะฐะตัััั ัะพะปัะบะพ ั ะทะฐะธะฝัะตัะตัะพะฒะฐะฝะฝัะผะธ!`,
            button: '๐ ะกะพะทะดะฐัั ะพะฟัะพั'
        },
        evening: {
            title: '๐ ะะตะฝั 6 โ ะะฟัะพั ะณะพัะพะฒ?',
            text: `ะกะพะทะดะฐะป ัะฒะพะน ะฟะตัะฒัะน ะพะฟัะพั?

ะขะตะฟะตัั ัั ะฑัะดะตัั ะทะฝะฐัั ะพ ัะตะปะพะฒะตะบะต ะะ ัะฐะทะณะพะฒะพัะฐ ั ะฝะธะผ!`,
            button: 'โ ะกะดะฐัั ะพัััั ะะฝั 6'
        },
        completed: {
            title: '๐ ะะตะฝั 6 ะทะฐะฒะตัััะฝ!',
            text: `ะะฟัะพัั โ ะผะพัะฝัะน ะธะฝััััะผะตะฝั ะบะฒะฐะปะธัะธะบะฐัะธะธ!

ะะฐะฒััะฐ โ ะฟะพะดะฒะพะดะธะผ ะธัะพะณะธ ะฟะตัะฒะพะน ะฝะตะดะตะปะธ ะธ ะณะพัะพะฒะธะผัั ะบ ะฝะพะฒะพะผั ััะฐะฟั.`,
            button: '๐ ะะพะน ะฟัะพะณัะตัั'
        }
    },
    
    7: {
        morning: {
            title: '๐ ะะตะฝั 7 โ ะัะพะณะธ ะฟะตัะฒะพะน ะฝะตะดะตะปะธ!',
            text: `ะะพะทะดัะฐะฒะปัั! ะขั ะฟัะพััะป ะฟะตัะฒัั ะฝะตะดะตะปั!

๐ ะะฐะดะฐัะธ:
โข ะัะพะฐะฝะฐะปะธะทะธััะน ััะพ ะฟะพะปััะธะปะพัั
โข ะะพัะผะพััะธ ััะฐัะธััะธะบั ะพัะบัััะพะบ
โข ะะพััะฐะฒั ัะตะปะธ ะฝะฐ ัะปะตะดััััั ะฝะตะดะตะปั

๐ ะะพะฝัั: ะกะตะณะพะดะฝั ะผะพะถะตัั ะฟะพะปััะธัั ะฐะฟะณัะตะนะด ัะพ ัะบะธะดะบะพะน!`,
            button: '๐ ะะพะธ ัะตะทัะปััะฐัั'
        },
        evening: {
            title: '๐ ะะตะฝั 7 โ ะะตะดะตะปั ะทะฐะฒะตััะตะฝะฐ?',
            text: `ะะพะดะฒัะป ะธัะพะณะธ ะฟะตัะฒะพะน ะฝะตะดะตะปะธ?

ะัะปะธัะฝะฐั ัะฐะฑะพัะฐ! ะะฟะตัะตะดะธ โ ะฟัะพะดะฒะธะฝัััะต ะธะฝััััะผะตะฝัั.`,
            button: 'โ ะะฐะฒะตััะธัั ะฝะตะดะตะปั 1'
        },
        completed: {
            title: '๐ ะะตะดะตะปั 1 ะทะฐะฒะตััะตะฝะฐ!',
            text: `ะขั ะพัะฒะพะธะป ะฑะฐะทั CardGift!

ะะฐ ัะปะตะดัััะตะน ะฝะตะดะตะปะต: ะฑะปะพะณ, ัะฐัััะปะบะธ, ะฐะฒัะพะผะฐัะธะทะฐัะธั. ะะพัะพะฒััั ะบ ะฝะพะฒะพะผั ััะพะฒะฝั!`,
            button: '๐ ะะฐัะฐัั ะฝะตะดะตะปั 2'
        }
    },
    
    // โโโ ะะะะะะฏ 2: ะะะกะข โโโ
    8: {
        morning: {
            title: '๐ ะะตะฝั 8 โ ะขะฒะพะน ะฑะปะพะณ!',
            text: `ะะฐัะธะฝะฐะตะผ ะฒัะพััั ะฝะตะดะตะปั! ะกะตะณะพะดะฝั ัะพะทะดะฐัะผ ะฑะปะพะณ.

๐ ะะฐะดะฐัะธ:
โข ะะฐะณััะทะธ ัะฒะพั ัะพัะพ
โข ะะฐะฟะธัะธ ะพ ัะตะฑะต (3-5 ะฟัะตะดะปะพะถะตะฝะธะน)
โข ะะพะฑะฐะฒั ะบะพะฝัะฐะบัั

๐ก ะะปะพะณ = ัะฒะพั ะปะธัะพ. ะัะดะธ ัะพััั ะทะฝะฐัั ั ะบะตะผ ะธะผะตัั ะดะตะปะพ!`,
            button: '๐ ะะฐัััะพะธัั ะฑะปะพะณ'
        },
        evening: {
            title: '๐ ะะตะฝั 8 โ ะะปะพะณ ะณะพัะพะฒ?',
            text: `ะะฐัััะพะธะป ัะฒะพะน ะฑะปะพะณ?

ะขะตะฟะตัั ั ัะตะฑั ะตััั ะฟัะพัะตััะธะพะฝะฐะปัะฝะฐั ัััะฐะฝะธัะฐ!`,
            button: 'โ ะกะดะฐัั ะพัััั ะะฝั 8'
        },
        completed: {
            title: '๐ ะะตะฝั 8 ะทะฐะฒะตัััะฝ!',
            text: `ะะปะพะณ ัะพะทะดะฐะฝ!

ะะฐะฒััะฐ ะฝะฐััะธัััั ะฟะธัะฐัั ะฟะพััั ะบะพัะพััะต ะฟัะธะฒะปะตะบะฐัั ะฒะฝะธะผะฐะฝะธะต.`,
            button: '๐ ะะพะน ะฟัะพะณัะตัั'
        }
    },
    
    9: {
        morning: {
            title: 'โ๏ธ ะะตะฝั 9 โ ะะตัะฒัะน ะฟะพัั!',
            text: `ะกะตะณะพะดะฝั ะฟะธัะตะผ ะฟะตัะฒัะน ะฟะพัั ะฒ ะฑะปะพะณ.

๐ ะะฐะดะฐัะธ:
โข ะะฐะฟะธัะธ ะฟะพัั "ะะพัะตะผั ั ะทะดะตัั"
โข ะะพะฑะฐะฒั ะบะฐััะธะฝะบั
โข ะะฟัะฑะปะธะบัะน!

๐ก ะะดะตั: ัะฐััะบะฐะถะธ ัะฒะพั ะธััะพัะธั โ ะฟะพัะตะผั ะฝะฐัะฐะป, ััะพ ะธัะตัั.`,
            button: 'โ๏ธ ะะฐะฟะธัะฐัั ะฟะพัั'
        },
        evening: {
            title: '๐ ะะตะฝั 9 โ ะะพัั ะพะฟัะฑะปะธะบะพะฒะฐะฝ?',
            text: `ะะฐะฟะธัะฐะป ัะฒะพะน ะฟะตัะฒัะน ะฟะพัั?

ะะพะดะตะปะธัั ัััะปะบะพะน ะฝะฐ ะฑะปะพะณ ะฒ ัะพััะตััั!`,
            button: 'โ ะกะดะฐัั ะพัััั ะะฝั 9'
        },
        completed: {
            title: '๐ ะะตะฝั 9 ะทะฐะฒะตัััะฝ!',
            text: `ะะตัะฒัะน ะฟะพัั ะฒ ัะตัะธ!

ะะฐะฒััะฐ ะธะทััะธะผ AI Studio โ ัะพะทะดะฐะฝะธะต ะบะพะฝัะตะฝัะฐ ะทะฐ ัะตะบัะฝะดั.`,
            button: '๐ ะะพะน ะฟัะพะณัะตัั'
        }
    },
    
    10: {
        morning: {
            title: '๐ค ะะตะฝั 10 โ AI Studio!',
            text: `ะกะตะณะพะดะฝั ะพัะบััะฒะฐะตะผ ัะธะปั ะะ!

๐ ะะฐะดะฐัะธ:
โข ะะทััะธ AI Studio
โข ะกะณะตะฝะตัะธััะน ัะตะบัั ะดะปั ะฟะพััะฐ
โข ะะพะฟัะพะฑัะน ัะพะทะดะฐัั ะบะฐััะธะฝะบั

๐ก AI = ัะฒะพะน ะฟะพะผะพัะฝะธะบ. ะะฝ ะดะตะปะฐะตั ัะตัะฝะพะฒะธะบ, ัั ัะตะดะฐะบัะธััะตัั!`,
            button: '๐ค ะัะบัััั AI Studio'
        },
        evening: {
            title: '๐ ะะตะฝั 10 โ AI ะพัะฒะพะธะป?',
            text: `ะะพะฟัะพะฑะพะฒะฐะป AI ะณะตะฝะตัะฐัะธั?

ะญัะพ ััะบะพะฝะพะผะธั ัะตะฑะต ัะฐัั ัะฐะฑะพัั!`,
            button: 'โ ะกะดะฐัั ะพัััั ะะฝั 10'
        },
        completed: {
            title: '๐ ะะตะฝั 10 ะทะฐะฒะตัััะฝ!',
            text: `AI Studio ะฟะพะด ะบะพะฝััะพะปะตะผ!

ะะฐะฒััะฐ โ ะฐะฒัะพะผะฐัะธัะตัะบะธะต ัะฐัััะปะบะธ ะธ ะฒะพัะพะฝะบะธ.`,
            button: '๐ ะะพะน ะฟัะพะณัะตัั'
        }
    },
    
    11: {
        morning: {
            title: '๐จ ะะตะฝั 11 โ ะะฐัััะปะบะธ!',
            text: `ะกะตะณะพะดะฝั ะฐะฒัะพะผะฐัะธะทะธััะตะผ ะพะฑัะตะฝะธะต.

๐ ะะฐะดะฐัะธ:
โข ะะทััะธ ัะฐะทะดะตะป ะะฐัััะปะบะธ
โข ะกะพะทะดะฐะน ะฟัะธะฒะตัััะฒะตะฝะฝะพะต ะฟะธััะผะพ
โข ะะฐัััะพะน ะฐะฒัะพะพัะฟัะฐะฒะบั

๐ก ะะฐัััะปะบะธ ัะฐะฑะพัะฐัั ะฟะพะบะฐ ัั ัะฟะธัั!`,
            button: '๐จ ะกะพะทะดะฐัั ัะฐัััะปะบั'
        },
        evening: {
            title: '๐ ะะตะฝั 11 โ ะะฐัััะปะบะฐ ะณะพัะพะฒะฐ?',
            text: `ะะฐัััะพะธะป ัะฒะพั ะฟะตัะฒัั ัะฐัััะปะบั?

ะะฒัะพะผะฐัะธะทะฐัะธั โ ะบะปัั ะบ ะผะฐัััะฐะฑั!`,
            button: 'โ ะกะดะฐัั ะพัััั ะะฝั 11'
        },
        completed: {
            title: '๐ ะะตะฝั 11 ะทะฐะฒะตัััะฝ!',
            text: `ะะฒัะพะผะฐัะธะทะฐัะธั ะทะฐะฟััะตะฝะฐ!

ะะฐะฒััะฐ ัะพะทะดะฐัะผ ะฟะพะปะฝะพัะตะฝะฝัั ะฐะฒัะพะฒะพัะพะฝะบั ะธะท 3 ะฟะธัะตะผ.`,
            button: '๐ ะะพะน ะฟัะพะณัะตัั'
        }
    },
    
    12: {
        morning: {
            title: '๐ ะะตะฝั 12 โ ะะฒัะพะฒะพัะพะฝะบะฐ!',
            text: `ะกะตะณะพะดะฝั ัััะพะธะผ ะฒะพัะพะฝะบั ะบะพัะพัะฐั ะฟัะพะดะฐัั ัะฐะผะฐ.

๐ ะะฐะดะฐัะธ:
โข ะกะพะทะดะฐะน ัะตัะธั ะธะท 3 ะฟะธัะตะผ
โข ะะธััะผะพ 1: ะัะธะฒะตัััะฒะธะต (ััะฐะทั)
โข ะะธััะผะพ 2: ะฆะตะฝะฝะพััั (ัะตัะตะท 2 ะดะฝั)
โข ะะธััะผะพ 3: ะัะตะดะปะพะถะตะฝะธะต (ัะตัะตะท 5 ะดะฝะตะน)

๐ก 3 ะบะฐัะฐะฝะธั = ะดะพะฒะตัะธะต + ะฟัะพะดะฐะถะฐ!`,
            button: '๐ ะกะพะทะดะฐัั ะฒะพัะพะฝะบั'
        },
        evening: {
            title: '๐ ะะตะฝั 12 โ ะะพัะพะฝะบะฐ ัะฐะฑะพัะฐะตั?',
            text: `ะะฐัััะพะธะป ะฐะฒัะพะฒะพัะพะฝะบั ะธะท 3 ะฟะธัะตะผ?

ะขะตะฟะตัั ะบะฐะถะดัะน ะบะพะฝัะฐะบั ะฟัะพัะพะดะธั ัะตัะตะท ัะฒะพั ัะธััะตะผั!`,
            button: 'โ ะกะดะฐัั ะพัััั ะะฝั 12'
        },
        completed: {
            title: '๐ ะะตะฝั 12 ะทะฐะฒะตัััะฝ!',
            text: `ะะฒัะพะฒะพัะพะฝะบะฐ ัะพะทะดะฐะฝะฐ!

ะะฐะฒััะฐ โ Telegram ะฑะพั ะดะปั ะผะณะฝะพะฒะตะฝะฝัั ัะฒะตะดะพะผะปะตะฝะธะน.`,
            button: '๐ ะะพะน ะฟัะพะณัะตัั'
        }
    },
    
    13: {
        morning: {
            title: '๐ค ะะตะฝั 13 โ Telegram ะฑะพั!',
            text: `ะกะตะณะพะดะฝั ะฟะพะดะบะปััะฐะตะผ ะผะณะฝะพะฒะตะฝะฝัะต ัะฒะตะดะพะผะปะตะฝะธั.

๐ ะะฐะดะฐัะธ:
โข ะะพะดะบะปััะธ Telegram ะฑะพั
โข ะัะพะฒะตัั ััะพ ัะฒะตะดะพะผะปะตะฝะธั ะฟัะธัะพะดัั
โข ะะฐัััะพะน ะบะฐะบะธะต ัะธะฟั ะฟะพะปััะฐัั

๐ก Telegram = ะผะณะฝะพะฒะตะฝะฝะฐั ัะตะฐะบัะธั ะฝะฐ ะณะพัััะธั ะปะธะดะพะฒ!`,
            button: '๐ค ะะพะดะบะปััะธัั Telegram'
        },
        evening: {
            title: '๐ ะะตะฝั 13 โ ะะพั ะฟะพะดะบะปััะตะฝ?',
            text: `Telegram ัะฒะตะดะพะผะปะตะฝะธั ัะฐะฑะพัะฐัั?

ะขะตะฟะตัั ัั ะฝะต ะฟัะพะฟัััะธัั ะฝะธ ะพะดะฝะพะณะพ ะณะพัััะตะณะพ ะปะธะดะฐ!`,
            button: 'โ ะกะดะฐัั ะพัััั ะะฝั 13'
        },
        completed: {
            title: '๐ ะะตะฝั 13 ะทะฐะฒะตัััะฝ!',
            text: `Telegram ะฟะพะดะบะปััะตะฝ!

ะะฐะฒััะฐ ะฟะพะดะฒะพะดะธะผ ะธัะพะณะธ ะฒัะพัะพะน ะฝะตะดะตะปะธ.`,
            button: '๐ ะะพะน ะฟัะพะณัะตัั'
        }
    },
    
    14: {
        morning: {
            title: '๐ ะะตะฝั 14 โ ะัะพะณะธ ะฝะตะดะตะปะธ 2!',
            text: `ะะฒะต ะฝะตะดะตะปะธ ะฟะพะทะฐะดะธ! ะขั ะฟัะพััะป ะพะณัะพะผะฝัะน ะฟััั.

๐ ะะฐะดะฐัะธ:
โข ะัะพะฒะตัั ัะฒะพั ััะฐัะธััะธะบั
โข ะะพัะผะพััะธ ัะบะพะปัะบะพ ะบะพะฝัะฐะบัะพะฒ ัะพะฑัะฐะป
โข ะัะตะฝะธ ัััะตะบัะธะฒะฝะพััั ะฒะพัะพะฝะบะธ

๐ ะะพะฝัั: ะกะฟะตัะธะฐะปัะฝะพะต ะฟัะตะดะปะพะถะตะฝะธะต ะดะปั ะฐะบัะธะฒะฝัั!`,
            button: '๐ ะะพะธ ัะตะทัะปััะฐัั'
        },
        evening: {
            title: '๐ ะะตะฝั 14 โ ะะตะดะตะปั ะทะฐะฒะตััะตะฝะฐ?',
            text: `ะะพะดะฒัะป ะธัะพะณะธ ะฒัะพัะพะน ะฝะตะดะตะปะธ?

ะะพัะปะตะดะฝัั ะฝะตะดะตะปั โ ะฟัะพ ะบะพะผะฐะฝะดั ะธ ะผะฐัััะฐะฑ!`,
            button: 'โ ะะฐะฒะตััะธัั ะฝะตะดะตะปั 2'
        },
        completed: {
            title: '๐ ะะตะดะตะปั 2 ะทะฐะฒะตััะตะฝะฐ!',
            text: `ะขั ะพัะฒะพะธะป ะฟัะพะดะฒะธะฝัััะต ะธะฝััััะผะตะฝัั!

ะคะธะฝะฐะปัะฝะฐั ะฝะตะดะตะปั: ะฟะพัััะพะตะฝะธะต ะบะพะผะฐะฝะดั ะธ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต. ะะฟะตััะด ะบ ะฑะพะปััะธะผ ัะตะทัะปััะฐัะฐะผ!`,
            button: '๐ ะะฐัะฐัั ะฝะตะดะตะปั 3'
        }
    },
    
    // โโโ ะะะะะะฏ 3: ะะะกะจะขะะ โโโ
    15: {
        morning: {
            title: 'โจ ะะตะฝั 15 โ ะขะฒะพะน ะฑัะตะฝะด!',
            text: `ะะฐัะธะฝะฐะตะผ ัะธะฝะฐะปัะฝัั ะฝะตะดะตะปั! ะกะพะทะดะฐัะผ ะปะธัะฝัะน ะฑัะตะฝะด.

๐ ะะฐะดะฐัะธ:
โข ะกัะพัะผัะปะธััะน ัะฒะพั ะฟะพะทะธัะธะพะฝะธัะพะฒะฐะฝะธะต
โข ะะฐะฟะธัะธ ัะฒะพั ะธััะพัะธั
โข ะะฟัะตะดะตะปะธ ะฒะธะทัะฐะปัะฝัะน ััะธะปั

๐ก ะัะตะฝะด = ะฟะพัะตะผั ะปัะดะธ ะฒัะฑะธัะฐัั ะธะผะตะฝะฝะพ ัะตะฑั!`,
            button: 'โจ ะกะพะทะดะฐัั ะฑัะตะฝะด'
        },
        evening: {
            title: '๐ ะะตะฝั 15 โ ะัะตะฝะด ะพะฟัะตะดะตะปัะฝ?',
            text: `ะกัะพัะผัะปะธัะพะฒะฐะป ัะฒะพั ะฟะพะทะธัะธะพะฝะธัะพะฒะฐะฝะธะต?

ะขะตะฟะตัั ะปัะดะธ ะฟะพะฝะธะผะฐัั ะบัะพ ัั ะธ ัะตะผ ะผะพะถะตัั ะฟะพะผะพัั!`,
            button: 'โ ะกะดะฐัั ะพัััั ะะฝั 15'
        },
        completed: {
            title: '๐ ะะตะฝั 15 ะทะฐะฒะตัััะฝ!',
            text: `ะะธัะฝัะน ะฑัะตะฝะด ัะพะทะดะฐะฝ!

ะะฐะฒััะฐ โ ัััะฐัะตะณะธั ะฟัะธะฒะปะตัะตะฝะธั ะฟะฐััะฝััะพะฒ.`,
            button: '๐ ะะพะน ะฟัะพะณัะตัั'
        }
    },
    
    16: {
        morning: {
            title: '๐ ะะตะฝั 16 โ ะัะธะฒะปะตัะตะฝะธะต ะฟะฐััะฝััะพะฒ!',
            text: `ะกะตะณะพะดะฝั ััะธะผัั ะฝะฐัะพะดะธัั ะปัะดะตะน ะฒ ะบะพะผะฐะฝะดั.

๐ ะะฐะดะฐัะธ:
โข ะะทััะธ ัะตัะตัะฐะปัะฝัั ัะธััะตะผั
โข ะกะพะทะดะฐะน ะพัะบัััะบั-ะฟัะธะณะปะฐัะตะฝะธะต
โข ะะฟัะตะดะตะปะธ ะณะดะต ะธัะบะฐัั ะฟะฐััะฝััะพะฒ

๐ก ะะพะผะฐะฝะดะฐ = ะฟะฐััะธะฒะฝัะน ะดะพัะพะด. ะะดะธะฝ ัะธะปัะฝัะน ะฟะฐััะฝัั ะฒะฐะถะฝะตะต 100 ัะปะฐะฑัั!`,
            button: '๐ ะะตัะตัะฐะปัะฝะฐั ัะธััะตะผะฐ'
        },
        evening: {
            title: '๐ ะะตะฝั 16 โ ะกััะฐัะตะณะธั ะณะพัะพะฒะฐ?',
            text: `ะะฐะทะพะฑัะฐะปัั ะบะฐะบ ะฟัะธะฒะปะตะบะฐัั ะฟะฐััะฝััะพะฒ?

ะะฐะฒััะฐ ะฝะฐัะฝัะผ ะฐะบัะธะฒะฝะพะต ะฟัะธะณะปะฐัะตะฝะธะต!`,
            button: 'โ ะกะดะฐัั ะพัััั ะะฝั 16'
        },
        completed: {
            title: '๐ ะะตะฝั 16 ะทะฐะฒะตัััะฝ!',
            text: `ะกััะฐัะตะณะธั ะฟัะธะฒะปะตัะตะฝะธั ะณะพัะพะฒะฐ!

ะะฐะฒััะฐ โ ะฟะตัะฒัะต ะฟัะธะณะปะฐัะตะฝะธั ะฒ ะบะพะผะฐะฝะดั.`,
            button: '๐ ะะพะน ะฟัะพะณัะตัั'
        }
    },
    
    17: {
        morning: {
            title: '๐ค ะะตะฝั 17 โ ะะตัะฒัะต ะฟัะธะณะปะฐัะตะฝะธั!',
            text: `ะกะตะณะพะดะฝั ะพัะฟัะฐะฒะปัะตะผ ะฟัะธะณะปะฐัะตะฝะธั ะฒ ะบะพะผะฐะฝะดั.

๐ ะะฐะดะฐัะธ:
โข ะกะพััะฐะฒั ัะฟะธัะพะบ ะธะท 10 ะฟะพัะตะฝัะธะฐะปัะฝัั ะฟะฐััะฝััะพะฒ
โข ะัะฟัะฐะฒั ะธะผ ะฟะตััะพะฝะฐะปัะฝัะต ะฟัะธะณะปะฐัะตะฝะธั
โข ะะฐะฟะธัะธ ัะตะฐะบัะธะธ ะฒ CRM

๐ก ะะต ะฟัะพะดะฐะฒะฐะน โ ะฟัะธะณะปะฐัะฐะน ะฟะพัะผะพััะตัั. ะะฐะฒะปะตะฝะธะต ะพััะฐะปะบะธะฒะฐะตั!`,
            button: '๐ค ะัะธะณะปะฐัะธัั ะฟะฐััะฝััะพะฒ'
        },
        evening: {
            title: '๐ ะะตะฝั 17 โ ะัะฟัะฐะฒะธะป ะฟัะธะณะปะฐัะตะฝะธั?',
            text: `ะะฐะทะพัะปะฐะป ะฟัะธะณะปะฐัะตะฝะธั ะฟะพัะตะฝัะธะฐะปัะฝัะผ ะฟะฐััะฝััะฐะผ?

ะะฐะบะธะต ะฑัะปะธ ัะตะฐะบัะธะธ? ะะฐะฟะธััะฒะฐะน ะฒัั!`,
            button: 'โ ะกะดะฐัั ะพัััั ะะฝั 17'
        },
        completed: {
            title: '๐ ะะตะฝั 17 ะทะฐะฒะตัััะฝ!',
            text: `ะะตัะฒัะต ะฟัะธะณะปะฐัะตะฝะธั ะพัะฟัะฐะฒะปะตะฝั!

ะะฐะฒััะฐ ััะธะผัั ัะฐะฑะพัะฐัั ั ะฒะพะทัะฐะถะตะฝะธัะผะธ ะธ ะทะฐะบััะฒะฐัั ะฟะฐััะฝััะพะฒ.`,
            button: '๐ ะะพะน ะฟัะพะณัะตัั'
        }
    },
    
    18: {
        morning: {
            title: '๐ฌ ะะตะฝั 18 โ ะะฐะฑะพัะฐ ั ะฒะพะทัะฐะถะตะฝะธัะผะธ!',
            text: `ะกะตะณะพะดะฝั ััะธะผัั ะพัะฒะตัะฐัั ะฝะฐ ัะพะผะฝะตะฝะธั.

๐ ะะฐะดะฐัะธ:
โข ะะทััะธ ัะธะฟะธัะฝัะต ะฒะพะทัะฐะถะตะฝะธั
โข ะะพะดะณะพัะพะฒั ะพัะฒะตัั
โข ะัะฐะบัะธะบัะนัั ะฒ ะฟะตัะตะฟะธัะบะต

๐ก ะะพะทัะฐะถะตะฝะธะต = ะธะฝัะตัะตั! ะงะตะปะพะฒะตะบ ะดัะผะฐะตั, ะฐ ะฝะต ะพัะบะฐะทัะฒะฐะตั.`,
            button: '๐ฌ ะกะบัะธะฟัั ะพัะฒะตัะพะฒ'
        },
        evening: {
            title: '๐ ะะตะฝั 18 โ ะัะฒะพะธะป ัะฐะฑะพัั ั ะฒะพะทัะฐะถะตะฝะธัะผะธ?',
            text: `ะะพะดะณะพัะพะฒะธะป ะพัะฒะตัั ะฝะฐ ัะธะฟะธัะฝัะต ัะพะผะฝะตะฝะธั?

ะขะตะฟะตัั ัั ะณะพัะพะฒ ะบ ะปัะฑะพะผั ัะฐะทะณะพะฒะพัั!

๐ ะะพะฝัั: ะะพัะปะตะดะฝะธะน ัะฐะฝั ะฟะพะปััะธัั ะฐะฟะณัะตะนะด ัะพ ัะบะธะดะบะพะน!`,
            button: 'โ ะกะดะฐัั ะพัััั ะะฝั 18'
        },
        completed: {
            title: '๐ ะะตะฝั 18 ะทะฐะฒะตัััะฝ!',
            text: `ะขั ะฒะพะพััะถัะฝ ะพัะฒะตัะฐะผะธ ะฝะฐ ะปัะฑัะต ะฒะพะทัะฐะถะตะฝะธั!

ะะฐะฒััะฐ โ ะฟะพัััะพะตะฝะธะต ัะธััะตะผั ัะฐะฑะพัั ั ะบะพะผะฐะฝะดะพะน.`,
            button: '๐ ะะพะน ะฟัะพะณัะตัั'
        }
    },
    
    19: {
        morning: {
            title: '๐ ะะตะฝั 19 โ ะกะธััะตะผะฐ ะดะปั ะบะพะผะฐะฝะดั!',
            text: `ะกะตะณะพะดะฝั ัะพะทะดะฐัะผ ัะธััะตะผั ะพะฑััะตะฝะธั ะฟะฐััะฝััะพะฒ.

๐ ะะฐะดะฐัะธ:
โข ะกะพะทะดะฐะน ัะฐั ะดะปั ะบะพะผะฐะฝะดั
โข ะะพะดะณะพัะพะฒั ะฟัะธะฒะตัััะฒะตะฝะฝะพะต ัะพะพะฑัะตะฝะธะต
โข ะะฐัััะพะน ัะธััะตะผั ะฟะพะดะดะตัะถะบะธ ะฝะพะฒะธัะบะพะฒ

๐ก ะัะฑะปะธัะธัะพะฒะฐะฝะธะต: ะฟะฐััะฝััั ะดะตะปะฐัั ัะพ, ััะพ ะดะตะปะฐะตัั ัั!`,
            button: '๐ ะกะพะทะดะฐัั ัะธััะตะผั'
        },
        evening: {
            title: '๐ ะะตะฝั 19 โ ะกะธััะตะผะฐ ะณะพัะพะฒะฐ?',
            text: `ะกะพะทะดะฐะป ะธะฝััะฐััััะบัััั ะดะปั ะบะพะผะฐะฝะดั?

ะขะตะฟะตัั ะฝะพะฒะธัะบะธ ะฑัะดัั ะทะฝะฐัั ะบัะดะฐ ะธะดัะธ ะธ ััะพ ะดะตะปะฐัั!`,
            button: 'โ ะกะดะฐัั ะพัััั ะะฝั 19'
        },
        completed: {
            title: '๐ ะะตะฝั 19 ะทะฐะฒะตัััะฝ!',
            text: `ะกะธััะตะผะฐ ะดะปั ะบะพะผะฐะฝะดั ัะพะทะดะฐะฝะฐ!

ะะฐะฒััะฐ โ ะตะถะตะดะฝะตะฒะฝะฐั ัััะธะฝะฐ ััะฟะตัะฝะพะณะพ ะปะธะดะตัะฐ.`,
            button: '๐ ะะพะน ะฟัะพะณัะตัั'
        }
    },
    
    20: {
        morning: {
            title: '๐ ะะตะฝั 20 โ ะะถะตะดะฝะตะฒะฝะฐั ัััะธะฝะฐ!',
            text: `ะกะตะณะพะดะฝั ะฒััััะฐะธะฒะฐะตะผ ัะธััะตะผั ัะฐะฑะพัั.

๐ ะะฐะดะฐัะธ:
โข ะฃััะพ: 30 ะผะธะฝ โ ะฟัะพะฒะตัะบะฐ ะปะธะดะพะฒ, ะพัะฒะตัั
โข ะะตะฝั: 1-2 ัะฐัะฐ โ ะบะฐัะฐะฝะธั, ะบะพะฝัะตะฝั
โข ะะตัะตั: 30 ะผะธะฝ โ ะฐะฝะฐะปะธะท, ะฟะปะฐะฝะธัะพะฒะฐะฝะธะต

๐ก ะกะธััะตะผะฝะพััั ะฒะฐะถะฝะตะต ะณะตัะพะธัะตัะบะธั ััะฒะบะพะฒ!`,
            button: '๐ ะะพะน ัะฐัะฟะพััะดะพะบ'
        },
        evening: {
            title: '๐ ะะตะฝั 20 โ ะััะธะฝะฐ ะพะฟัะตะดะตะปะตะฝะฐ?',
            text: `ะััััะพะธะป ัะฒะพะน ะตะถะตะดะฝะตะฒะฝัะน ัะธัะผ?

ะะฐะฒััะฐ โ ัะธะฝะฐะปัะฝัะน ะดะตะฝั ะธ ะฑะพะปััะธะต ะฟะปะฐะฝั ะฝะฐ ะฑัะดััะตะต!`,
            button: 'โ ะกะดะฐัั ะพัััั ะะฝั 20'
        },
        completed: {
            title: '๐ ะะตะฝั 20 ะทะฐะฒะตัััะฝ!',
            text: `ะกะธััะตะผะฐ ัะฐะฑะพัั ะฝะฐัััะพะตะฝะฐ!

ะะฐะฒััะฐ โ ัะธะฝะฐะป ะฟัะพะณัะฐะผะผั ะธ ัะฒะพะธ ะฑะพะปััะธะต ะฟะปะฐะฝั!`,
            button: '๐ ะะพะน ะฟัะพะณัะตัั'
        }
    },
    
    21: {
        morning: {
            title: '๐ ะะตะฝั 21 โ ะคะะะะ!',
            text: `ะะพะทะดัะฐะฒะปัั! ะขั ะดะพััะป ะดะพ ะบะพะฝัะฐ!

๐ ะคะธะฝะฐะปัะฝัะต ะทะฐะดะฐัะธ:
โข ะะพัะผะพััะธ ัะฒะพะน ะฟััั โ ะพัะบัะดะฐ ะฝะฐัะฐะป
โข ะะพะดััะธัะฐะน ัะตะทัะปััะฐัั ะทะฐ 21 ะดะตะฝั
โข ะะพััะฐะฒั ัะตะปะธ ะฝะฐ ัะปะตะดัััะธะน ะผะตััั
โข ะะฐะฟะธัะธ ะฟะปะฐะฝ ะดะตะนััะฒะธะน

๐ ะขั ัะฟัะฐะฒะธะปัั! ะขั โ ะผะพะปะพะดะตั!`,
            button: '๐ ะะพะธ ัะตะทัะปััะฐัั'
        },
        evening: {
            title: '๐ ะะตะฝั 21 โ ะัะพะณัะฐะผะผะฐ ะทะฐะฒะตััะตะฝะฐ?',
            text: `ะะพะดะฒัะป ะธัะพะณะธ ัะฒะพะตะณะพ 21-ะดะฝะตะฒะฝะพะณะพ ะฟััะตัะตััะฒะธั?

ะญัะพ ะฝะต ะบะพะฝะตั โ ััะพ ะฝะฐัะฐะปะพ ัะฒะพะตะณะพ ะฑะพะปััะพะณะพ ะฟััะธ!`,
            button: 'โ ะะฐะฒะตััะธัั ะฟัะพะณัะฐะผะผั'
        },
        completed: {
            title: '๐ ะะะะะะะะะ ะะะะะะจะะะ!',
            text: `ะขะซ ะกะะะะะ ะญะขะ! 21 ะดะตะฝั ะฟะพะทะฐะดะธ.

ะขั ะฟัะพััะป ะฟััั ะพั ะฝะพะฒะธัะบะฐ ะดะพ ัะตะปะพะฒะตะบะฐ ั ะฟะพะปะฝะพัะตะฝะฝะพะน ัะธััะตะผะพะน ะทะฐัะฐะฑะพัะบะฐ.

ะงัะพ ะดะฐะปััะต?
โข ะัะพะดะพะปะถะฐะน ะฟัะธะผะตะฝััั ะฒัั ััะพ ัะทะฝะฐะป
โข ะะฐะทะฒะธะฒะฐะน ะบะพะผะฐะฝะดั
โข ะกัะฐะฒั ะฑะพะปััะธะต ัะตะปะธ

๐ช ะขะตะฟะตัั ัั ะทะฝะฐะตัั ะบะฐะบ ััะพ ัะฐะฑะพัะฐะตั. ะะตะนััะฒัะน!`,
            button: '๐ ะ ะปะธัะฝัะน ะบะฐะฑะธะฝะตั'
        }
    }
};

// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
// ะคะฃะะะฆะะฏ ะะะะะะะะะะฏ ะ ะะงะะะะะฌ
// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

async function addToQueue(userGwId, chatId, messageType, day) {
    const dayData = DAY_REMINDERS[day];
    if (!dayData || !dayData[messageType]) {
        console.log(`No message for day ${day}, type ${messageType}`);
        return false;
    }
    
    const message = dayData[messageType];
    const text = `<b>${message.title}</b>\n\n${message.text}`;
    
    // ะะฟัะตะดะตะปัะตะผ URL ะบะฝะพะฟะบะธ
    let buttonUrl = `${PLATFORM_URL}/program.html#day${day}`;
    if (messageType === 'completed') {
        buttonUrl = `${PLATFORM_URL}/program.html`;
    }
    
    const queueItem = {
        user_gw_id: userGwId,
        telegram_chat_id: chatId,
        message_text: text,
        button_text: message.button,
        button_url: buttonUrl,
        message_type: `academy_day${day}_${messageType}`,
        status: 'pending',
        created_at: new Date().toISOString()
    };
    
    const { error } = await supabase
        .from('cardgift_bot_queue')
        .insert(queueItem);
    
    if (error) {
        console.error('Error adding to queue:', error);
        return false;
    }
    
    return true;
}

// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
// ะะกะะะะะะ ะะะะะะะขะงะะ
// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

export default async function handler(req, res) {
    // CORS
    res.setHeader('Access-Control-Allow-Origin', '*');
    
    // GET = ะดะธะฐะณะฝะพััะธะบะฐ
    if (req.method === 'GET') {
        try {
            const { data: subs, error: subErr } = await supabase
                .from('cardgift_bot_subscribers')
                .select('user_gw_id, telegram_chat_id, is_active')
                .limit(20);
            
            const { data: progress, error: progErr } = await supabase
                .from('user_progress')
                .select('user_id, gw_id, current_day, program_status')
                .limit(20);
            
            const { data: queue, error: queueErr } = await supabase
                .from('cardgift_bot_queue')
                .select('id, user_gw_id, message_type, status, created_at')
                .order('created_at', { ascending: false })
                .limit(10);
            
            return res.status(200).json({
                status: 'ok',
                version: '2.0',
                hasBotToken: !!process.env.CARDGIFT_BOT_TOKEN,
                hasSupabaseKey: !!supabaseKey,
                subscribers: {
                    count: subs?.length || 0,
                    error: subErr?.message || null,
                    data: subs || []
                },
                progress: {
                    count: progress?.length || 0,
                    error: progErr?.message || null,
                    data: progress || []
                },
                queue: {
                    count: queue?.length || 0,
                    error: queueErr?.message || null,
                    data: queue || []
                }
            });
        } catch (e) {
            return res.status(200).json({ 
                status: 'error', 
                error: e.message,
                hasBotToken: !!process.env.CARDGIFT_BOT_TOKEN,
                hasSupabaseKey: !!supabaseKey
            });
        }
    }
    
    // ะัะพะฒะตัะบะฐ ะฐะฒัะพัะธะทะฐัะธะธ (ัะพะปัะบะพ ะดะปั POST/Cron)
    const authKey = req.headers['x-cron-key'] || req.query.key;
    const expectedKey = process.env.CRON_SECRET_KEY;
    
    if (expectedKey && authKey !== expectedKey) {
        return res.status(401).json({ error: 'Unauthorized' });
    }
    
    // ะะฟัะตะดะตะปัะตะผ ะฒัะตะผั ัััะพะบ (UTC)
    const hour = new Date().getUTCHours();
    const isEvening = hour >= 17 || hour < 5; // 17:00-05:00 UTC = ะฒะตัะตั
    const messageType = isEvening ? 'evening' : 'morning';
    
    console.log(`๐ค Academy Reminders: ${messageType} run at ${hour}:00 UTC`);
    
    try {
        // 1. ะะพะปััะธัั ะฒัะตั ะฐะบัะธะฒะฝัั ะฟะพะดะฟะธััะธะบะพะฒ ั ะฟัะพะณัะตััะพะผ
        const { data: subscribers, error: subError } = await supabase
            .from('cardgift_bot_subscribers')
            .select(`
                user_gw_id,
                telegram_chat_id,
                is_active
            `)
            .eq('is_active', true);
        
        if (subError) {
            console.error('Subscribers fetch error:', subError);
            return res.status(500).json({ error: subError.message });
        }
        
        if (!subscribers || subscribers.length === 0) {
            return res.status(200).json({ 
                ok: true, 
                message: 'No active subscribers',
                queued: 0
            });
        }
        
        console.log(`๐ Found ${subscribers.length} active subscribers`);
        
        let queued = 0;
        let skipped = 0;
        
        for (const sub of subscribers) {
            // 2. ะะพะปััะธัั ะฟัะพะณัะตัั ะฟะพะปัะทะพะฒะฐัะตะปั
            // โญ FIX: ะัะตะผ ะฒ user_progress (ััะดะฐ ัะพััะฐะฝัะตั academy.html)
            // ะัะพะฑัะตะผ ะฝะฐะนัะธ ะฟะพ user_id ะธะปะธ gw_id (ะพะฑะฐ ะผะพะณัั ะธัะฟะพะปัะทะพะฒะฐัััั)
            let progress = null;
            
            const { data: p1 } = await supabase
                .from('user_progress')
                .select('current_day, program_status, last_activity_at')
                .eq('gw_id', sub.user_gw_id)
                .single();
            
            if (p1) {
                progress = p1;
            } else {
                // Fallback - ะฟัะพะฑัะตะผ user_id
                const { data: p2 } = await supabase
                    .from('user_progress')
                    .select('current_day, program_status, last_activity_at')
                    .eq('user_id', sub.user_gw_id)
                    .single();
                if (p2) progress = p2;
            }
            
            if (!progress) {
                // ะะตั ะฟัะพะณัะตััะฐ โ ะฒะพะทะผะพะถะฝะพ ะฝะต ะฝะฐัะฐะป ะฟัะพะณัะฐะผะผั
                skipped++;
                continue;
            }
            
            const currentDay = progress.current_day || 1;
            const isCompleted = progress.program_status === 'completed';
            
            // ะะต ะพัะฟัะฐะฒะปัะตะผ ะตัะปะธ ะดะตะฝั > 21 ะธะปะธ ะฟัะพะณัะฐะผะผะฐ ะทะฐะฒะตััะตะฝะฐ
            if (currentDay > 21 || isCompleted) {
                skipped++;
                continue;
            }
            
            // 3. ะะฟัะตะดะตะปัะตะผ ะบะฐะบะพะต ัะพะพะฑัะตะฝะธะต ะพัะฟัะฐะฒะธัั
            let msgType = messageType;
            
            // ะัะพะฒะตััะตะผ ะฑัะปะฐ ะปะธ ะฐะบัะธะฒะฝะพััั ัะตะณะพะดะฝั (ะดะตะฝั ะทะฐะฒะตัััะฝ)
            const today = new Date().toISOString().split('T')[0];
            const lastActivity = progress.last_activity_at || '';
            const activityToday = lastActivity.startsWith(today);
            
            // ะัะปะธ ะดะตะฝั ัะถะต ะพััะฐะฑะพัะฐะฝ ัะตะณะพะดะฝั โ ะพัะฟัะฐะฒะปัะตะผ "completed" (ัะพะปัะบะพ ะฒะตัะตัะพะผ)
            if (activityToday && isEvening) {
                msgType = 'completed';
            }
            
            // 4. ะัะพะฒะตััะตะผ ะฝะต ะพัะฟัะฐะฒะปัะปะธ ะปะธ ัะถะต ัะตะณะพะดะฝั ัะฐะบะพะต ัะพะพะฑัะตะฝะธะต
            const today = new Date().toISOString().split('T')[0];
            const { data: existing } = await supabase
                .from('cardgift_bot_queue')
                .select('id')
                .eq('user_gw_id', sub.user_gw_id)
                .like('message_type', `academy_day${currentDay}_${msgType}`)
                .gte('created_at', today)
                .limit(1);
            
            if (existing && existing.length > 0) {
                // ะฃะถะต ะพัะฟัะฐะฒะปัะปะธ ัะตะณะพะดะฝั
                skipped++;
                continue;
            }
            
            // 5. ะะพะฑะฐะฒะปัะตะผ ะฒ ะพัะตัะตะดั
            const added = await addToQueue(
                sub.user_gw_id,
                sub.telegram_chat_id,
                msgType,
                currentDay
            );
            
            if (added) {
                queued++;
            } else {
                skipped++;
            }
        }
        
        console.log(`โ Queued: ${queued}, Skipped: ${skipped}`);
        
        return res.status(200).json({
            ok: true,
            time: messageType,
            subscribers: subscribers.length,
            queued,
            skipped
        });
        
    } catch (error) {
        console.error('Academy reminders error:', error);
        return res.status(500).json({ error: error.message });
    }
}
